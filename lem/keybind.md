## Lem のキーバインド

### キーバインドの実装
- https://github.com/cxxxr/lem/search?q=*global-keymap*&unscoped_q=*global-keymap*

### キーバインドのヘルプ

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x ?` | `describe-key` | キーバインドのヘルプ | `ctrl-x shift-:` |

### Lisp プログラム

#### プログラムの評価

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `M-:` | `self-lisp-eval-string` | 指定した Lisp プログラムを実行する | プログラムはミニバッファで指定する |
| `C-x C-e` | `self-lisp-eval-last-expression` | カーソル直前の Lisp プログラムの評価 | 実行結果はミニバッファに出力される |

### カーソルの移動

| キーバインド | コマンド | 意味 | 補足 |
| ----- | --- | --- | --- |
| `M-g` | `goto-line` | 指定した番号の行に移動する | |
| `C-p` | `previous-line` | 一行上に移動する | `↑` |
| `C-n` | `next-line` | 一行下に移動する | `↓` |
| `C-f` | `forward-char` | 一文字右に移動する | `→` |
| `C-b` | `backward-char` | 一文字左に移動する | `←` |
| `C-a` | `move-to-beginning-of-line` | 行頭に移動する | `Home` |
| `C-e` | `move-to-end-of-line` | 行末に移動する | `End` |
| `M-f` | `forward-word` | 次の単語に移動する | |
| `M-b` | `previous-word` | 前の単語に移動する | |
| `C-v` | `next-page` | 次のページに移動する | `PageDown` |
| `M-v` | `previous-page` | 前のページに移動する | `PageUp` |
| `C-x ]` | `next-page-char` | 次の改ページへ移動 | 次の `^L` へ移動 |
| `C-x [` | `previous-page-char` | 前の改ページへ移動 | 前の `^L` へ移動 |
| `M-<` | `move-to-beginning-of-buffer` | バッファの一番最初に移動する | |
| `M->` | `move-to-end-of-buffer` | バッファの一番最後に移動する | |
| `M-m` | `back-to-indentation-command` | カーソル行の最初の空白ではない文字に移動する | |

- `C-x ]` は実質的にバッファの最初に移動するキーとして使用可能
- `C-x [` は実質的にバッファの最後に移動するキーとして使用可能

### テキストの編集

#### 文字列補完

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x /` | `abbrev-with-pop-up-window` | 文字列補完ウィンドウを表示する | |
| `M-/` | `abbrev` | 文字列を補完する | 繰り返し入力すると補完候補が変わる | |

- `a` の後ろにカーソルを配置して `C-x /` を入力すると `active` や `apropos` が候補として表示される

#### 文字入力

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-q` | `quoted-insert` | 入力をエスケープしない | `Ctrl-v` のような感じ |
| `M-(` | `insert-()` | `()` を入力する | |
| `M-)` | `move-over-)` | 閉じ括弧を探して改行とインデントを挿入する | |

#### 文字変換

| `C-t` | `transpose-characters` | 前後の文字を入れ替える | |
| `M-u` | `uppercase-word` | 単語を大文字に置換する | |
| `M-Space` | `just-one-space` | 複数の連続した空白文字を一つの空白文字にまとめる | |

#### 文字編集

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-h` | `delete-previous-char` | カーソル直前の文字を削除 | `delete` |
| `C-d` | `delete-next-char` | カーソル位置の文字を削除 | `delete`
| `C-k` | `kill-line` | カーソル位置から行末までを消去 | `kill` 連続で実行すると複数行をコピー |
| `C-u <n> C-k` | `--` | n 行削除 | |
| `C-x C-o` | `delete-blank-lines` | 連続する空行をまとめて消去 | `kill` |
| `M-k` | `kill-paragraph` | カーソル位置以降のパラグラフを削除 | |
| `M-C-h` | `backward-delete-word` | カーソル直前の単語を消去 | `kill` |
| `M-d` | `delete-word` | カーソルの後ろの単語を消去 | `kill` |
| `C-m` | `newline` | 改行 | `Return` |
| `C-o` | `open-line` | カーソルの後ろに改行を入力する | |
| `Tab` | `indent-line-and-complete-symbol` | インデントを挿入 | シンボルの補完については不明 |
| `C-j` | `newline-and-indent` | 改行とインデント | プログラミングで使用する |
| `M-^` | `delete-indentation` | インデントを削除 | |

#### paste
- `kill` した内容は `yank` することができます
- `delete` した内容は `yank` できません

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-y` | `yank` | ヤンク | ペースト |
| `M-y` | `yank-pop` | 履歴を遡ったヤンク | `C-y` の後に `M-y` を入力 |

#### 範囲選択

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-@` | `mark-set` | マークを設定する | 範囲選択の開始 `C-Space` |
| `C-w` | `kill-region` | 範囲選択を終了し、選択範囲の文字列を消去する | `kill` |
| `M-w` | `copy-region` | 範囲選択を終了し、選択範囲の文字列をコピーする | |
| `C-x C-x` | `exchange-point-mark` | マークを設定した位置とカーソル位置を入れ替える | カーソル位置はマークが設定された位置に移動する |
| `C-x h` | `mark-set-whole-buffer` | バッファ全体をマークする | |

#### 矩形選択モード

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x Space` | `rectangle-mark-mode` | 矩形選択モードを開始 | |
| `C-w` | `kill-region` | 範囲選択を終了し、選択範囲の文字列を消去する | `kill` |
| `M-w` | `copy-region` | 範囲選択を終了し、選択範囲の文字列をコピーする | |
| `C-o` | `rectangle-open` | 選択範囲に空白を挿入する | |
| `C-t` | `rectangle-string` | 選択範囲を指定した文字列で置き換える | |
| `C-x C-x` | `exchange-point-mark` | マークを設定した位置とカーソル位置を入れ替える | カーソル位置はマークが設定された位置に移動する |

#### undo / redo

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-\` | `undo` | アンドゥ | |
| `C-_` | `redo` | リドゥ | |

#### 繰り返し

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-u <n>` | `universal-argument` | 繰り返し実行 | `C-u <n>` の後にキーを入力すると `n` 回実行される |
| `C-u -` | `universal-argument-minus` | 回数にマイナスを指定する | |
| `M-<n>` | `universal-argument-0` | n 回繰り返し | n は 0 ~ 9 |


- `C-u` を連続して入力すると、繰り返す回数が増えます

#### 検索

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-s` | `isearch-forward` | 前方検索 | 大文字小文字を区別しない |
| `C-r` | `isearch-backward` | 後方検索 | 大文字小文字を区別しない |

### バッファの操作

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x C-f` | `find-file` | ファイルを開く | 後述 |
| `C-x C-s` | `save-buffer` | バッファを保存する | |
| `C-x C-b` | `list-buffers` | `*Buffer Menu*` を表示する | |
| `C-x b` | `select-buffer` | ウィンドウに表示するバッファを変更する | |
| `C-x k` | `kill-buffer` | バッファを閉じる | |
| `C-x C-q` | `toggle-read-only` | 読み込み専用・書き込み可能の切り替え | |

#### `C-x C-f` の動作
- 存在しないファイル名を指定すると新規にファイルを作成できる
- すでに開かれているファイル名を指定すると、そのファイルのバッファに移動する

#### `*Buffer Menu*` の操作
- `d` でバッファを閉じる

### ウィンドウの操作

#### ウィンドウ分割

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x 0` | `delete-current-window` | 現在カーソルのあるウィンドウを閉じる | |
| `C-x 1` | `delete-other-windows` | 他のウィンドウを閉じる | |
| `C-x 2` | `split-active-window-vertically` | 上下にウィンドウを分割する | |
| `C-x 3` | `split-active-window-horizontally` | 左右にウィンドウを分割する | || `C-x o` | `other-window` | 他のウィンドウに移動する | |
| `M-o` | `other-window` | 他のウィンドウに移動する | |

#### 画面スクロール

| `C-l` | `recenter` | カーソル位置が中央になるようにスクロールする | |
| `C-u C-v` | `--` | 4  行上にスクロールする | |
| `C-u <n> C-v` | `--` | n  行上にスクロールする | |
| `C-u M-v` | `--` | 4  行下にスクロールする | |
| `C-u <n> M-v` | `--` | n  行下にスクロールする | |

### エディタの操作

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-g` | `keyboard-quit` | 中断 | |
| `C-x C-c` | `exit-lem` | Lem を終了させる | |

#### `C-g` の機能

- 入力途中のコマンドを終了
- 検索を終了
- 時間がかかっているコマンドを停止

### コマンドの入力

| キーバインド | コマンド | 意味 | 補足 |
| --- | --- | --- | --- |
| `C-x` | `--` | キープリフィクス | 複合キーバインドの先頭部分 |
| `M-x` | `execute-command` | コマンド名でコマンドを指定して実行する | |

- コマンド名はタブキーで補完することができます

### 空いているキー

#### Ctrl

| キーバインド |
| --- |
| `C-z` |
| `C-c` |

#### Meta

| キーバインド |
| --- |
| `M-p` |
| `M-n` |

### 不明なキー

| キーバインド | コマンド | 動き |
| --- | --- | --- |
| `C-]` | `--` | `Interrupt` が発生する |
| `M-~` | `unmark-buffer` | |
| `C-x #` | `filter-buffer` | |
| `C-x @` | `pipe-command` | 外部コマンドの実行 |

### Lem には存在しないキー
- 一部です

| キーバインド | Emacs での意味 |
| --- | --- |
| `C-h` | ヘルプ |
| `C-z` | エディタを一時停止する |
| `M-C-v` | 他のウィンドウをスクロールさせる |
| `C-x 4 C-f` | 新しいウィンドウでファイルを開く |
| `Esc Esc Esc` | 抜け出し |